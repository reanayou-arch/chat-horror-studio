<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Horror Studio</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui;
  background:#0b1220;
  color:#e5e7eb;
}
.app{
  max-width:420px;
  margin:auto;
  height:100vh;
  display:flex;
  flex-direction:column;
}
.header{
  padding:16px;
  font-size:20px;
  font-weight:700;
  background:#020617;
  border-bottom:1px solid rgba(255,255,255,.1);
}
.chat{
  flex:1;
  padding:16px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.message{
  display:flex;
  gap:8px;
}
.avatar{
  width:36px;
  height:36px;
  border-radius:50%;
  background:#2563eb;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
}
.bubble{
  background:#111827;
  border-radius:16px;
  padding:10px 14px;
  max-width:75%;
}
.name{
  font-size:12px;
  opacity:.7;
  margin-bottom:4px;
}
.player{
  align-self:flex-end;
}
.player .bubble{
  background:#2563eb;
}
.input{
  display:flex;
  gap:8px;
  padding:12px;
  border-top:1px solid rgba(255,255,255,.1);
}
input{
  flex:1;
  background:#020617;
  border:1px solid rgba(255,255,255,.15);
  border-radius:14px;
  padding:10px;
  color:#fff;
}
button{
  background:#2563eb;
  border:none;
  border-radius:14px;
  padding:10px 14px;
  color:#fff;
}
.typing{
  opacity:.5;
  font-size:13px;
}
</style>
</head>

<body>
<div class="app">
  <div class="header">Чат</div>
  <div class="chat" id="chat"></div>

  <div class="input">
    <input id="input" placeholder="Написать сообщение…">
    <button onclick="send()">▶</button>
  </div>
</div>

<script>
const characters = [
  {
    name:"Вика",
    mood:"anxious",
    replies:{
      fear:[
        "Мне тоже страшно…",
        "Не говори так, пожалуйста…",
        "Я стараюсь держаться…"
      ],
      help:[
        "Я не знаю как помочь…",
        "Может, кто-то ещё ответит?",
      ]
    }
  },
  {
    name:"Саша",
    mood:"cold",
    replies:{
      fear:[
        "Паника не поможет.",
        "Соберись.",
        "Страх — плохой советчик."
      ],
      help:[
        "Говори конкретно.",
        "Что именно ты хочешь?"
      ]
    }
  }
];

function addMessage(name,text,isPlayer=false){
  const chat=document.getElementById("chat");
  chat.innerHTML+=`
    <div class="message ${isPlayer?"player":""}">
      <div class="avatar">${name[0]}</div>
      <div class="bubble">
        <div class="name">${name}</div>
        ${text}
      </div>
    </div>
  `;
  chat.scrollTop=99999;
}

function send(){
  const input=document.getElementById("input");
  const text=input.value.trim();
  if(!text)return;
  input.value="";
  addMessage("Вы",text,true);

  react(text.toLowerCase());
}

function react(text){
  const typing=document.createElement("div");
  typing.className="typing";
  typing.innerText="Кто-то печатает…";
  chat.appendChild(typing);
  chat.scrollTop=99999;

  setTimeout(()=>{
    typing.remove();

    let type="neutral";
    if(text.includes("страш")) type="fear";
    if(text.includes("помог")) type="help";

    const char=characters[Math.floor(Math.random()*characters.length)];
    const replies=char.replies[type];
    if(!replies) return;

    const reply=replies[Math.floor(Math.random()*replies.length)];
    addMessage(char.name,reply);
  },3000+Math.random()*3000);
}

addMessage("Вика","Ты здесь?..");
</script>
</body>
</html>
