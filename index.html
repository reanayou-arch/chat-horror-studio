<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ñ–∏–≤–æ–π –ß–∞—Ç ‚Äî Horror Studio</title>

<style>
body{
  margin:0;
  font-family:system-ui;
  background:#0b1220;
  color:#fff;
}
.app{
  max-width:420px;
  margin:auto;
  height:100vh;
  display:flex;
  flex-direction:column;
}
.header{
  padding:16px;
  font-size:20px;
  font-weight:700;
  background:#020617;
}
.chat{
  flex:1;
  padding:16px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.message{
  display:flex;
  gap:8px;
}
.player{
  justify-content:flex-end;
}
.avatar{
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
}
.bubble{
  padding:10px 14px;
  border-radius:16px;
  max-width:75%;
}
.name{
  font-size:12px;
  opacity:.7;
  margin-bottom:4px;
}
.input{
  display:flex;
  gap:8px;
  padding:12px;
  border-top:1px solid rgba(255,255,255,.1);
}
input{
  flex:1;
  padding:10px;
  border-radius:14px;
  border:none;
  outline:none;
}
button{
  background:#2563eb;
  border:none;
  border-radius:14px;
  padding:10px 14px;
  color:white;
}
.typing{
  opacity:.5;
  font-size:13px;
}
</style>
</head>

<body>
<div class="app">
  <div class="header">–ñ–∏–≤–æ–π –ß–∞—Ç</div>
  <div class="chat" id="chat"></div>

  <div class="input">
    <input id="input" placeholder="–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
    <button onclick="send()">‚ñ∂</button>
  </div>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");

const –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ = [
  {
    name:"–ê–ª–∏–Ω–∞",
    type:"—Å—Ç–µ—Ä–≤–∞",
    color:"#e11d48",
    replies:{
      hello:[
        "–û, –Ω—É –ø—Ä–∏–≤–µ—Ç. –¢–æ–ª—å–∫–æ –Ω–µ –¥—É–º–∞–π, —á—Ç–æ –º–Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ.",
        "–¢—ã –æ–ø—è—Ç—å –∑–¥–µ—Å—å? –ö–∞–∫ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ..."
      ],
      flirt:[
        "–§–ª–∏—Ä—Ç? –° —Ç–æ–±–æ–π? –ê—Ö–∞—Ö, —Å–º–µ—à–Ω–æ.",
        "–ù–µ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞–π —Å–µ–±—è."
      ],
      angry:[
        "–¢—ã —Ä–µ–∞–ª—å–Ω–æ –¥—É–º–∞–µ—à—å, —á—Ç–æ —Ç–∞–∫ –º–æ–∂–Ω–æ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å?",
        "–£–∂–∞—Å. –ü—Ä–æ—Å—Ç–æ —É–∂–∞—Å."
      ]
    }
  },
  {
    name:"–ú–∞–∫—Å",
    type:"–º–∞—á–æ",
    color:"#2563eb",
    replies:{
      hello:[
        "–ü—Ä–∏–≤–µ—Ç. –¢—ã –≤—ã–≥–ª—è–¥–∏—à—å... –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π.",
        "–ù—É –∑–¥—Ä–∞–≤—Å—Ç–≤—É–π. –†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å."
      ],
      flirt:[
        "–¢—ã –¥–∞–∂–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å, –∫–∞–∫ –º–Ω–µ —Ö–æ—á–µ—Ç—Å—è —É–∑–Ω–∞—Ç—å —Ç–µ–±—è –±–ª–∏–∂–µ.",
        "–ù–µ –±–æ–π—Å—è, —è —É–º–µ—é –¥–æ–±–∏–≤–∞—Ç—å—Å—è —Å–≤–æ–µ–≥–æ."
      ],
      angry:[
        "–≠–π, –ø–æ–ª–µ–≥—á–µ. –Ø –Ω–µ –ª—é–±–ª—é, –∫–æ–≥–¥–∞ –Ω–∞ –º–µ–Ω—è –¥–∞–≤—è—Ç.",
        "–°–ø–æ–∫–æ–π–Ω–æ. –ú—ã –Ω–µ –≤—Ä–∞–≥–∏."
      ]
    }
  }
];

let lastPlayer = Date.now();

/* –≤—ã–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è */
function addMessage(name,text,color,isPlayer=false){
  chat.innerHTML += `
    <div class="message ${isPlayer?"player":""}">
      ${isPlayer ? "" : `<div class="avatar" style="background:${color}">${name[0]}</div>`}
      <div class="bubble" style="background:${isPlayer?"#22c55e":"#111827"}">
        <div class="name">${name}</div>
        ${text}
      </div>
    </div>
  `;
  chat.scrollTop = 99999;
}

/* –∏–≥—Ä–æ–∫ –ø–∏—à–µ—Ç */
function send(){
  const text = input.value.trim();
  if(!text) return;
  input.value="";
  lastPlayer = Date.now();
  addMessage("–í—ã",text,"",true);

  —Ä–µ–∞–∫—Ü–∏—è(text.toLowerCase());
}

/* –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ —Ä–µ–∞–≥–∏—Ä—É—é—Ç */
function —Ä–µ–∞–∫—Ü–∏—è(text){
  let mood="hello";
  if(text.includes("–ª—é–±–ª—é")||text.includes("–∫—Ä–∞—Å–∏–≤–∞—è")) mood="flirt";
  if(text.includes("–¥—É—Ä–∞")||text.includes("–∏–¥–∏")) mood="angry";

  const char = –ø–µ—Ä—Å–æ–Ω–∞–∂–∏[Math.floor(Math.random()*–ø–µ—Ä—Å–æ–Ω–∞–∂–∏.length)];
  const replyList = char.replies[mood];

  typing(char.name,()=>{
    const reply = replyList[Math.floor(Math.random()*replyList.length)];
    addMessage(char.name,reply,char.color);

    // –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –º–æ–≥—É—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥—É —Å–∞–º–∏
    if(Math.random()>0.6){
      setTimeout(()=>autoTalk(),2500);
    }
  });
}

/* –∞–≤—Ç–æ–¥–∏–∞–ª–æ–≥ –º–µ–∂–¥—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ */
function autoTalk(){
  const a = –ø–µ—Ä—Å–æ–Ω–∞–∂–∏[0];
  const b = –ø–µ—Ä—Å–æ–Ω–∞–∂–∏[1];

  typing(a.name,()=>{
    addMessage(a.name,"–ú–∞–∫—Å, —Ç—ã –æ–ø—è—Ç—å —Å—Ç—Ä–æ–∏—à—å –∏–∑ —Å–µ–±—è –≥–µ—Ä–æ—è?",a.color);
    typing(b.name,()=>{
      addMessage(b.name,"–ê–ª–∏–Ω–∞, —Ç—ã –ø—Ä–æ—Å—Ç–æ —Ä–µ–≤–Ω—É–µ—à—å üòâ",b.color);
    });
  });
}

/* –ø–µ—á–∞—Ç–∞–µ—Ç */
function typing(name,callback){
  const t=document.createElement("div");
  t.className="typing";
  t.innerText=name+" –ø–µ—á–∞—Ç–∞–µ—Ç...";
  chat.appendChild(t);
  chat.scrollTop=99999;

  setTimeout(()=>{
    t.remove();
    callback();
  },1500+Math.random()*2000);
}

/* —Å—Ç–∞—Ä—Ç */
addMessage("–ê–ª–∏–Ω–∞","–ù—É –∏ –∫—Ç–æ —Ç–µ–±—è —Å—é–¥–∞ –ø—É—Å—Ç–∏–ª?..","#e11d48");
setTimeout(()=>addMessage("–ú–∞–∫—Å","–°–ø–æ–∫–æ–π–Ω–æ. –ú–æ–∂–µ—Ç –æ–Ω –Ω–µ —Ç–∞–∫–æ–π —É–∂ –ø–ª–æ—Ö–æ–π.","#2563eb"),3000);
</script>

</body>
</html>
